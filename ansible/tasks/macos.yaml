---
- name: Update homebrew
  homebrew:
    update_homebrew: 'yes'
    upgrade_all: 'no'

- name: Install prezto
  git:
    repo: 'https://github.com/sorin-ionescu/prezto.git'
    dest: '~/.zprezto'
    update: 'no'

- name: Setup prezto
  file:
    src: "{{ item.src }}"
    dest: "{{ item.dest }}"
    state: link
  with_items:
    - src: '~/.zprezto/runcoms/zlogin'
      dest: '~/.zlogin'
    - src: '~/.zprezto/runcoms/zlogout'
      dest: '~/.zlogout'
    - src: '~/.zprezto/runcoms/zpreztorc'
      dest: '~/.zpreztorc'
    - src: '~/.zprezto/runcoms/zprofile'
      dest: '~/.zprofile'
    - src: '~/.zprezto/runcoms/zshenv'
      dest: '~/.zshenv'
    - src: '~/.zprezto/runcoms/zshrc'
      dest: '~/.zshrc'

- name: Please set up prezto
  debug:
    msg: "see: https://github.com/sorin-ionescu/prezto"

- name: Install homebrew packages
  homebrew:
    name: "{{ item.name }}"
    install_options: "{{ item.options|default() }}"
  with_items:
    - name: git
    - name: fzf
    - name: ripgrep
    - name: colordiff
    - name: source-highlight
    - name: jq
    - name: direnv
    - name: watch
    - name: tree

- name: Create symbolic link fir diff-highlight
  file:
    src: '/usr/local/share/git-core/contrib/diff-highlight/diff-highlight'
    dest: '/usr/local/bin/diff-highlight'
    state: link

